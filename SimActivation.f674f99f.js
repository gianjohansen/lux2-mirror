(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{188:function(e,t,n){"use strict";n.r(t);n(50),n(51),n(111),n(71),n(74),n(20),n(25),n(17),n(37);var i=n(0),r=n.n(i),o=n(201),a=n(13),s={Divider:a.b.div.withConfig({displayName:"styles__Divider",componentId:"zku2d5-0"})(["width:100%;height:1px;background:rgb(221,221,221);margin:52px 0 20px;"]),SimActivationWrapper:a.b.div.withConfig({displayName:"styles__SimActivationWrapper",componentId:"zku2d5-1"})(["padding-top:50px;padding-bottom:250px;"]),IntroText:a.b.p.withConfig({displayName:"styles__IntroText",componentId:"zku2d5-2"})(["margin-bottom:24px;"]),ModalHeading:a.b.p.withConfig({displayName:"styles__ModalHeading",componentId:"zku2d5-3"})(["color:rgb(0,0,0);font-size:14px;font-weight:700;font-family:MarkProBold,MarkPro,sans-serif;text-transform:uppercase;text-align:center;margin:0 0 5px;@media only screen and (min-width:768px){font-size:18px;line-height:1;margin:0 0 10px;}"]),ModalText:a.b.p.withConfig({displayName:"styles__ModalText",componentId:"zku2d5-4"})(["color:rgb(120,120,120);font-size:14px;line-height:18px;text-align:center;margin:0 0 0;@media only screen and (min-width:768px){font-size:16px;}"]),ModalCTA:Object(a.b)(o.g).withConfig({displayName:"styles__ModalCTA",componentId:"zku2d5-5"})(["margin-top:24px;"]),CenteredWrapper:a.b.div.withConfig({displayName:"styles__CenteredWrapper",componentId:"zku2d5-6"})(["text-align:center;"]),SuccessTick:a.b.p.withConfig({displayName:"styles__SuccessTick",componentId:"zku2d5-7"})(["text-align:center;line-height:1;margin-top:40px;&:before{font-family:'lux-icons';content:'';font-size:96px;color:rgb(60,128,49);}"]),ErrorIcon:a.b.p.withConfig({displayName:"styles__ErrorIcon",componentId:"zku2d5-8"})(["text-align:center;line-height:1;margin-top:0;margin-bottom:20px;&:before{font-family:'lux-icons';content:'';font-size:96px;color:rgb(217,58,27);}"])};var l=e=>Object(i.isValidElement)(e)&&Boolean(e.props.children);var c=e=>Object(i.isValidElement)(e)&&l(e)&&i.Children.toArray(e.props.children).reduce((e,t)=>e||Object(i.isValidElement)(t),!1);const u=(e,t)=>i.Children.toArray(e).filter(t).map(e=>Object(i.isValidElement)(e)&&c(e)?Object(i.cloneElement)(e,Object.assign(Object.assign({},e.props),{children:u(e.props.children,t)})):e);var p=u;const m=(e,t)=>{let n;return i.Children.toArray(e).find(e=>Object(i.isValidElement)(e)&&c(e)?void 0!==(n=m(e.props.children,t)):!!t(e)&&(n=e,!0)),n};var d=m;const h=(e,t)=>{i.Children.forEach(e,e=>{Object(i.isValidElement)(e)&&c(e)&&h(e.props.children,t),t(e)})};var f=h;const b=(e,t)=>i.Children.map(e,e=>Object(i.isValidElement)(e)&&c(e)?t(Object(i.cloneElement)(e,Object.assign(Object.assign({},e.props),{children:b(e.props.children,t)}))):t(e));var g=b;var y=(e,t)=>i.Children.toArray(e).filter(t);var S=(e,t=[],n="rest")=>i.Children.toArray(e).reduce((e,r)=>{const o=Object.assign({},e);return Object(i.isValidElement)(r)&&"string"==typeof r.type&&t.includes(r.type)?o[r.type]=[...o[r.type]||[],r]:o[n]=[...o[n]||[],r],o},{});const v=e=>null==e||"boolean"==typeof e?"":e.toString(),C=e=>e instanceof Array||Object(i.isValidElement)(e)?i.Children.toArray(e).reduce((e,t)=>{let n;return n=Object(i.isValidElement)(t)&&l(t)?C(t.props.children):v(t),e.concat(n)},""):v(e);var E=C,x=Object.assign(Object.assign({},i.Children),{deepFilter:p,deepFind:d,deepForEach:f,deepMap:g,filter:y,groupByType:S,hasChildren:l,hasComplexChildren:c,onlyText:E});function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){var e,i,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(e=!(r=w(t).call(this))||"object"!==I(r)&&"function"!=typeof r?P(i):r).state={showSimReplacement:!1,visibleScreens:"default",errorDetails:null,containerFound:!1,errors:{}},e.axios=n(217),e.backFromSimReplacement=e.backFromSimReplacement.bind(P(e)),e.showSimReplacement=e.showSimReplacement.bind(P(e)),e.goToScreen=e.goToScreen.bind(P(e)),e.onPhoneChange=e.onPhoneChange.bind(P(e)),e.onOTPChange=e.onOTPChange.bind(P(e)),e.onSimNumberChange=e.onSimNumberChange.bind(P(e)),e.submitSimReplacentPhone=e.submitSimReplacentPhone.bind(P(e)),e.submitOTP=e.submitOTP.bind(P(e)),e.submitSimNumber=e.submitSimNumber.bind(P(e)),e}var a,l,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,i["Component"]),a=t,(l=[{key:"backFromSimReplacement",value:function(e){switch(e){case 2:this.setState({visibleScreens:"sim-replacement-phone"});break;case 3:this.setState({visibleScreens:"sim-replacement-otp"});break;default:this.setState({showSimReplacement:!1,visibleScreens:"default"})}}},{key:"showSimReplacement",value:function(){this.setState({showSimReplacement:!0,visibleScreens:"sim-replacement-phone one"})}},{key:"goToScreen",value:function(e){this.setState({visibleScreens:e})}},{key:"setCookieValue",value:function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();return document.cookie=e+"="+t+";"+r+";path=/;Domain=.optus.com.au",!0}},{key:"getCookieValue",value:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}},{key:"setErrorState",value:function(e){var t,n=this.props.errorMessages[0];Object.keys(n).forEach(function(i){n[i][0].errorCode===e&&(t=n[i][0])}),this.setState({errorDetails:t||e})}},{key:"submitSimReplacentPhone",value:function(){var e=this,t={input:this.state.inputPhoneNumber},n=this.getCookieValue("submitPhoneNumberAttempts")||"",i=(new Date).getTime();if(n){var r=0;if(n.split(",").map(function(e){console.log([e.split(":")[0],t.input,e.split(":")[0]===t.input]),e.split(":")[0]===t.input&&i-e.split(":")[1]<36e5&&r++}),r>=3)return new Promise(function(t,n){e.setErrorState("TooManyPhoneNumberAttemptsFrontEnd")})}return this.axios.post(this.props.apiUrlSubmitPhoneNumber,{ImplSendOtpInput:{msisdn:t.input,checkPendingOrder:!1}}).then(function(r){return r=r.data,new Promise(function(o,a){if("MSISDNNotFound"===r.ImplSendOtpOutput.status){var s=!1;if(n.split(",").map(function(e){e.split(":")[0]===t.input&&(s=!0)}),!s)return void e.setCookieValue("submitPhoneNumberAttempts",n+","+t.input+":"+i)}e.setCookieValue("submitPhoneNumberAttempts",n+","+t.input+":"+i),"SUCCESS"===r.ImplSendOtpOutput.status?e.setState({visibleScreens:"sim-replacement-otp one"}):e.setErrorState(r.ImplSendOtpOutput.status)})}).catch(function(e){this.setErrorState(e.data.ImplSendOtpOutput.status)})}},{key:"submitOTP",value:function(e){var t=this;e={input:this.state.inputOTP};return console.log(["submitting to",this.props.apiUrlSubmitOtp]),this.axios.post(this.props.apiUrlSubmitOtp,{ImplVerifyOTPRestInput:{msisdn:this.state.inputPhoneNumber,otp:e.input}}).then(function(e){return e=e.data,new Promise(function(n,i){"SUCCESS"===e.ImplVerifyOtpOutput.otpResult?t.setState({visibleScreens:"sim-replacement-sim-number one"}):t.setErrorState(e.ImplVerifyOtpOutput.otpResult)})}).catch(function(e){this.setErrorState(e.data.ImplVerifyOtpOutput.otpResult)})}},{key:"submitSimNumber",value:function(e){var t=this;e={input:this.state.inputSimNumber};return this.axios.post(this.props.apiUrlSubmitSimNumber,{ImplSubmitSIMReplacementInput:{msisdn:this.state.inputPhoneNumber,otp:this.state.inputOTP,simNumber:e.input}}).then(function(e){return e=e.data,new Promise(function(n,i){"SUCCESS"===e.ImplSubmitSIMReplacementOutput.status?t.setState({visibleScreens:"sim-replacement-success one"}):t.setErrorState(e.ImplSubmitSIMReplacementOutput.status)})}).catch(function(e){this.setErrorState(e.data.ImplSubmitSIMReplacementOutput.status)})}},{key:"recursiveMap",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return r.a.Children.map(e,function(e){return r.a.isValidElement(e)?(e.props.children&&(e=r.a.cloneElement(e,{children:recursiveMap(e.props.children,t)})),t(e)):e})})},{key:"onPhoneChange",value:function(e){this.setState({inputPhoneNumber:e.target.value})}},{key:"onOTPChange",value:function(e){this.setState({inputOTP:e.target.value})}},{key:"onSimNumberChange",value:function(e){this.setState({inputSimNumber:e.target.value})}},{key:"render",value:function(){var e=this,n=1,i=x.deepMap(this.props.children,function(e){var i=this,o={};if(e&&e.props)return"DynamicScreenItem"===e.props.reactComponent&&(o.showScreen=this.goToScreen,o.visibleScreens=this.state.visibleScreens),"goToSimReplacement"===(e.props&&e.props["cta-1"]?e.props["cta-1"][0].functionalCtaId:"")&&(o.onClick=function(){i.showSimReplacement(e.props["cta-1"][0].text)},o.text=e.props["cta-1"][0].text),e.type!==t||this.state.containerFound||(o.id="SimActivationInnerContainer"),e.type===t&&this.state.containerFound&&(o.id="SimReplacementInnerContainer"),"SimActivationInnerContainer"===e.props.id&&(o.isVisible=!this.state.showSimReplacement),"SimReplacementInnerContainer"===e.props.id&&(o.isVisible=this.state.showSimReplacement),"submitPhoneInput"===e.props.id&&(o.onChange=this.onPhoneChange),"submitOTPInput"===e.props.id&&(o.onChange=this.onOTPChange),"submitSimNumberInput"===e.props.id&&(o.onChange=this.onSimNumberChange),"sim-replacement-submit-phone"===(e.props&&e.props["cta-1"]?e.props["cta-1"][0].functionalCtaId:"")&&(o.onClick=this.submitSimReplacentPhone,o.prependInput=!0,o.prependInputChange=this.onPhoneChange,o.prependInputPlaceholder="Enter your phone number",o.text=e.props["cta-1"][0].text,o.inputError=this.state.errorDetails?this.state.errorDetails.failureDescription?this.state.errorDetails.failureDescription:this.state.errorDetails:""),"sim-replacement-submit-otp"===(e.props&&e.props["cta-1"]?e.props["cta-1"][0].functionalCtaId:"")&&(o.onClick=this.submitOTP,o.prependInput=!0,o.prependInputChange=this.onOTPChange,o.prependInputPlaceholder="Enter your one-time password",o.text=e.props["cta-1"][0].text,o.inputError=this.state.errorDetails?this.state.errorDetails.failureDescription?this.state.errorDetails.failureDescription:this.state.errorDetails:""),"sim-replacement-submit-sim-number"===(e.props&&e.props["cta-1"]?e.props["cta-1"][0].functionalCtaId:"")&&(o.onClick=this.submitSimNumber,o.prependInput=!0,o.prependInputChange=this.onSimNumberChange,o.prependInputPlaceholder="Enter your SIM number",o.text=e.props["cta-1"][0].text,o.inputError=this.state.errorDetails?this.state.errorDetails.failureDescription?this.state.errorDetails.failureDescription:this.state.errorDetails:""),"sim-replacement-phone"===e.props.id&&(o.formType=!0,o.hideDots=!1,o.steps=4,o.thisStep=n,o.goBack=this.backFromSimReplacement,n++),"sim-replacement-otp"===e.props.id&&(o.formType=!0,o.hideDots=!1,o.steps=4,o.thisStep=n,o.goBack=this.backFromSimReplacement,n++),"default"===e.props.id&&(o.leftTab=!0,o.leftTabText="New SIM",o.leftTabUrl="default type",o.rightTab=!0,o.rightTabText="Replacement",o.rightTabUrl="default replacement"),"type"===e.props.id&&(o.leftTab=!0,o.leftTabText="Postpaid",o.leftTabUrl="default type postpaid",o.rightTab=!0,o.rightTabText="Prepaid",o.rightTabUrl="/activate"),e.props.id,"sim-replacement-sim-number"===e.props.id&&(o.formType=!0,o.hideDots=!1,o.steps=4,o.thisStep=n,o.goBack=this.backFromSimReplacement,n++),"sim-replacement-success"===e.props.id&&(o.showSuccessIcon=!0),o.showScreens=this.goToScreen,r.a.cloneElement(e,o)}.bind(this));return r.a.createElement(o.d,null,r.a.createElement(o.i,null,r.a.createElement(o.b,{sm:12,md:7,lg:7},this.state.errorDetails?r.a.createElement(o.f,{open:!!this.state.errorDetails,onClose:function(){e.setState({errorDetails:null})}},r.a.createElement(s.CenteredWrapper,null,r.a.createElement(s.ErrorIcon,null),r.a.createElement(s.ModalHeading,null,"Something went wrong"),r.a.createElement(s.ModalText,null,this.state.errorDetails.failureDescription?this.state.errorDetails.failureDescription:this.state.errorDetails),this.state.errorDetails.failureCtaLabel?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.ModalCTA,{onClick:function(){"close"===e.state.errorDetails.successMessage?e.setState({errorDetails:null}):window.location.href=e.state.errorDetails.successMessage},text:this.state.errorDetails.failureCtaLabel})):"")):"",i)))}}])&&D(a.prototype,l),c&&D(a,c),t}();t.default=k},190:function(e,t,n){"use strict";n.r(t);n(50),n(51),n(111),n(69),n(17),n(20),n(25),n(76),n(411),n(412),n(37);var i,r=n(0),o=n.n(r),a=n(13);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(s(i={DirectDebitStatus:a.b.div.withConfig({displayName:"styles__DirectDebitStatus",componentId:"sc-1y79z51-0"})(["font-family:MarkProBold,MarkPro,sans-serif;p{display:inline-block;}.no-padding{padding-right:0px !important;padding-left:25px !important;}.no-padding_service{padding-left:0px !important;}"]),status:a.b.div.withConfig({displayName:"styles__status",componentId:"sc-1y79z51-1"})(["font-family:MarkProBold,MarkPro,sans-serif;margin-left:20px;display:inline-block;"]),dueDate:a.b.div.withConfig({displayName:"styles__dueDate",componentId:"sc-1y79z51-2"})(["font-family:MarkProBold,MarkPro,sans-serif;margin-left:0px;"])},"status",a.b.div.withConfig({displayName:"styles",componentId:"sc-1y79z51-3"})(["font-family:MarkProBold,MarkPro,sans-serif;display:inline-block;"])),s(i,"statusActive",a.b.div.withConfig({displayName:"styles__statusActive",componentId:"sc-1y79z51-4"})(["font-family:MarkProBold,MarkPro,sans-serif;display:inline-block;color:rgb(60,128,49);font-weight:bold;margin-left:8px;"])),s(i,"statusInactive",a.b.div.withConfig({displayName:"styles__statusInactive",componentId:"sc-1y79z51-5"})(["font-family:MarkProBold,MarkPro,sans-serif;display:inline-block;color:rgb(217,58,27);font-weight:bold;margin-left:8px;"])),s(i,"SocialLinks",a.b.div.withConfig({displayName:"styles__SocialLinks",componentId:"sc-1y79z51-6"})(["font-family:MarkProBold,MarkPro,sans-serif;display:inline-block;margin-left:10px;p{margin-bottom:-2px;vertical-align:bottom;}"])),s(i,"SuccessTick",a.b.p.withConfig({displayName:"styles__SuccessTick",componentId:"sc-1y79z51-7"})(["color:red;::before{font-family:'lux-icons';content:'';font-size:18px;color:rgb(60,128,49);font-weight:bolder;}"])),s(i,"ErrorIcon",a.b.p.withConfig({displayName:"styles__ErrorIcon",componentId:"sc-1y79z51-8"})(["::before{font-family:'lux-icons';content:'';font-size:18px;color:rgb(217,58,27);}"])),s(i,"Active",a.b.div.withConfig({displayName:"styles__Active",componentId:"sc-1y79z51-9"})(["display:block;"])),s(i,"InActive",a.b.div.withConfig({displayName:"styles__InActive",componentId:"sc-1y79z51-10"})(["display:block;"])),s(i,"Account",a.b.div.withConfig({displayName:"styles__Account",componentId:"sc-1y79z51-11"})(["display:block;"])),s(i,"AccountNumberLabel",a.b.div.withConfig({displayName:"styles__AccountNumberLabel",componentId:"sc-1y79z51-12"})(["display:inline-block;margin-right:10px;"])),s(i,"Services",a.b.div.withConfig({displayName:"styles__Services",componentId:"sc-1y79z51-13"})(["font-family:MarkProBold,MarkPro,sans-serif;"])),s(i,"ServiceIcons",a.b.div.withConfig({displayName:"styles__ServiceIcons",componentId:"sc-1y79z51-14"})([".service-name{display:inline-block;min-width:250px;}.mobile{::before{font-family:'lux-icons';content:'';font-size:24px;}}.prepay-broadband{::before{font-family:'lux-icons';content:'';font-size:24px;}}.broadband-service{::before{font-family:'lux-icons';content:'';font-size:24px;}}.tv{::before{font-family:'lux-icons';font-size:24px;content:'';}}.ipphone{::before{font-family:'lux-icons';font-size:24px;content:'';}}.homephone{::before{font-family:'lux-icons';font-size:24px;content:'';}}.fixed-line{::before{font-family:'lux-icons';font-size:24px;content:'';}}.circles-line{::before{font-family:'lux-icons';font-size:24px;content:'';}}.mobile-service{::before{font-family:'lux-icons';font-size:24px;content:'';}}.mobile-broadband{::before{font-family:'lux-icons';font-size:24px;content:'';}}.micro-sim{::before{font-family:'lux-icons';font-size:24px;content:'';}}.broadband-line{::before{font-family:'lux-icons';font-size:24px;content:'';}}.services-other{::before{font-family:'lux-icons';font-size:24px;content:'';}}.badges{font-size:0.75rem;line-height:1;color:#000;text-align:center;width:16px;height:16px;background:#fdcc08;border-radius:50%;padding-top:2px;position:relative;top:-10px;margin-left:-3px;left:-5px;}"])),i),c=n(201),u=n(193),p=n.n(u);function m(e){var t={WS:{name:"Optus Mobile",icon:"mobile",userNameProp:"MSISDN"},IN:{name:"Optus Broadband",icon:"prepay-broadband",userNameProp:"Optus ID"},FB:{name:"Optus Broadband",icon:"broadband-service",userNameProp:"Optus ID"},"Optus Broadband":{name:"Optus Broadband",icon:"prepay-broadband",userNameProp:"Optus ID"},BB:{name:"Optus Broadband",icon:"broadband-service",userNameProp:"Optus ID"},"yes TV":{name:"Optus TV",icon:"tv",userNameProp:"No."},TV:{name:"Optus TV",icon:"tv",userNameProp:"No."},WL:{name:"Optus Line",icon:"ipphone",userNameProp:"Telephone No"},FV:{name:"Optus Line",icon:"homephone",userNameProp:"Telephone No"},"Optus Phone":{name:"Optus Line",icon:"fixed-line",userNameProp:"Telephone No"},BN:{name:"Optus Bundle",icon:"circles-line",userNameProp:"Account No"},Mobile:{name:"Optus Mobile",icon:"mobile-service",userNameProp:"MSISDN"},M:{name:"Optus Mobile",icon:"mobile-service",userNameProp:"MSISDN"},MOB:{name:"Optus Mobile",icon:"mobile-service",userNameProp:"MSISDN"},MB:{name:"Optus Mobile Broadband",icon:"mobile-broadband",userNameProp:"MSISDN"},"Mobile Broadband":{name:"Optus Mobile Broadbande",icon:"mobile-broadband",userNameProp:"MSISDN"},SIM:{name:"Optus Sim",icon:"micro-sim",userNameProp:"MSISDN"},Equipment:{name:"Fibre Entertainment Bundle Plus",icon:"broadband-line",userNameProp:"Account No"},"Other Charges Summary":{name:"Other Charges Summary",icon:"services-other",userNameProp:"Other Charges Summary"}};return t[e]?t[e]:{name:"Other Charges Summary",icon:"services-other",userNameProp:"Other Charges Summary"}}var d=n(240);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){var t=e.color,n=e.height;return o.a.createElement("hr",{style:{color:t,backgroundColor:t,height:n,margin:0}})},v=function(e){function t(e){var i,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=b(t).call(this,e),(i=!o||"object"!==h(o)&&"function"!=typeof o?g(r):o).showServiceModal=function(){i.setState({showServices:!0}),i.ddService.fetchServices(i.props.isLocal).then(function(e){if((e=e.data)&&e.ImplBillingAccountDetailsResponse){var t=e.ImplBillingAccountDetailsResponse,n=[];if(t&&t.billingAccountDetails&&t.billingAccountDetails.length>0){for(var r=0;r<t.billingAccountDetails.length;r++)if(t.billingAccountDetails[r].faId===i.state.customerAccountNo){n=t.billingAccountDetails[r];break}n&&n.subscribers&&i.setState({accountServices:n.subscribers})}}}).catch(function(e){i.setState({servicesError:i.props.serviceError})})},i.hideServiceModal=function(){i.setState({showServices:!1})},i.state={directDebitStatus:null,billDueDate:" ",dDActive:!1,customerAccountNo:" ",showServices:!1,accountServices:[],servicesError:" "},i.axios=n(217),i.setAccountNumber=i.setAccountNumber.bind(g(i)),i.ddService=new d.a,i}var i,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),i=t,(a=[{key:"componentDidMount",value:function(){this.setDdStatus(),this.setAccountNumber(),window.addEventListener("DDSTATUSCHANGED",this.handleStatusChanged.bind(this)),window.addEventListener("HIDEDDSTATUS",this.hideDDStatusComponent.bind(this))}},{key:"setDdStatus",value:function(){var e=this;this.ddService.getDirectDebitStatus(this.props.isLocal).then(function(t){if((t=t.data)&&t.ImplCustomerRoleDetails)if(t.ImplCustomerRoleDetails.accountDetails||t.ImplCustomerRoleDetails.cardDetails){e.setState({directDebitStatus:e.props.statusActiveText});var n=t.ImplCustomerRoleDetails.cardDetails?t.ImplCustomerRoleDetails.cardDetails:t.ImplCustomerRoleDetails.accountDetails;if(n&&n.amountDue>0){var i=n.currentBillDueDate;e.setState({dDActive:!0}),e.setState({billDueDate:p()(i).format("DD MMMM YYYY")})}}else e.setState({directDebitStatus:e.props.statusInactiveText})}).catch(function(t){e.setState({directDebitStatus:e.props.errorMessage})})}},{key:"setAccountNumber",value:function(){if(this.props.isLocal)this.setState({customerAccountNo:"XXXXXXXXX"});else{var e=this.ddService.fetchBillId();e&&e.faId&&this.setState({customerAccountNo:e.faId})}}},{key:"handleStatusChanged",value:function(){document.getElementsByClassName("DirectDebitStatus")[0].setAttribute("style","display:block;"),this.setDdStatus().bind(this)}},{key:"hideDDStatusComponent",value:function(){document.getElementsByClassName("DirectDebitStatus")[0].setAttribute("style","display:none;")}},{key:"render",value:function(){for(var e=this,t=function(t,n,i){return n.length?o.a.createElement("div",null,t.split(i).reduce(function(t,i,r){return r?t.concat(n.includes(i)?o.a.createElement(c.a,{onClick:e.showServiceModal.bind(e)},"account ",e.state.customerAccountNo," "):i):[i]},[])):t},n=[],i=[],r=this.state.accountServices,a=0;a<r.length;a++)i.push(r[a].subscriberType);for(var s,u=i.reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{}),p=0,d=Object.keys(u);p<d.length;p++){var h=d[p];console.log(h,u[h]),n.push(o.a.createElement(c.i,{key:h},o.a.createElement(c.b,{sm:3,md:3,lg:3,className:"no-padding"},o.a.createElement(l.ServiceIcons,null,o.a.createElement("p",{className:m(h).icon}),o.a.createElement("p",{className:"badges"},u[h]))),o.a.createElement(c.b,{sm:9,md:9,lg:9,className:"no-padding_service"},o.a.createElement(l.ServiceIcons,null,o.a.createElement("p",{className:"service-name"},m(h).name)))))}var f=this.props.activeAccountLabel;new RegExp(/\[\||(.*?)\||\]/);f=t(f,["ACCOUNT_NUMBER"],new RegExp(/\[\||(.*?)\||\]/));var b,g,y,v=this.props.inactiveAccountLabel;return v=t(v,["ACCOUNT_NUMBER"],new RegExp(/\[\||(.*?)\||\]/)),s=this.state.directDebitStatus===this.props.statusActiveText?o.a.createElement(l.AccountNumberLabel,null,f):o.a.createElement(l.AccountNumberLabel,null,v),b=o.a.createElement("div",null,o.a.createElement(l.Services,null,o.a.createElement(c.f,{open:this.state.showServices,onClose:this.hideServiceModal,showClose:!0},o.a.createElement(c.d,null,o.a.createElement(c.i,null,o.a.createElement(c.b,{sm:12,md:12,lg:12},o.a.createElement("h4",null,"Account Number: ",this.state.customerAccountNo),o.a.createElement(S,{color:"Black",height:3}),n))))),o.a.createElement(l.Account,null,s)),g=this.state.directDebitStatus&&this.state.directDebitStatus===this.props.statusActiveText?o.a.createElement(l.Active,null,o.a.createElement("p",{className:"ddStatusLabel"},this.props.ddStatusLabel),o.a.createElement(l.status,null,o.a.createElement(l.SocialLinks,null,o.a.createElement("a",{href:"#"},o.a.createElement(l.SuccessTick,null))),o.a.createElement(l.statusActive,null,this.state.directDebitStatus)),b):this.state.directDebitStatus&&this.state.directDebitStatus===this.props.statusInactiveText?o.a.createElement(l.InActive,null,o.a.createElement("p",{className:"ddStatusLabel"},this.props.ddStatusLabel),o.a.createElement(l.status,null,o.a.createElement(l.SocialLinks,null,o.a.createElement("a",{href:"#"},o.a.createElement(l.ErrorIcon,null))),o.a.createElement(l.statusInactive,null,this.state.directDebitStatus)),b):o.a.createElement(l.status,null,o.a.createElement(l.statusInactive,null,this.state.directDebitStatus)),this.state.dDActive&&(y=o.a.createElement("p",{className:"billDueDate"},"Your bill Due Date is ",this.state.billDueDate," ")),o.a.createElement(c.d,null,o.a.createElement(c.i,null,o.a.createElement(c.b,{sm:12,md:12,lg:12},o.a.createElement(l.DirectDebitStatus,null,o.a.createElement("h2",null,this.props.ddHeader),o.a.createElement(S,{color:"Black",height:5}),o.a.createElement(l.status,null,g),o.a.createElement(l.dueDate,null,y)))))}}])&&f(i.prototype,a),s&&f(i,s),t}();v.defaultProps={className:"DirectDebitStatus"};t.default=v},191:function(e,t,n){"use strict";n.r(t);n(50),n(51),n(111);var i=n(0),r=n.n(i),o=n(13),a=n(201),s={SimManagement:o.b.div.withConfig({displayName:"styles__SimManagement",componentId:"sc-15mzhqz-0"})(["background:rgb(0,0,0);"]),Divider:o.b.div.withConfig({displayName:"styles__Divider",componentId:"sc-15mzhqz-1"})(["width:100%;height:1px;background:rgb(221,221,221);margin:25px 0 20px;"]),Dots:o.b.div.withConfig({displayName:"styles__Dots",componentId:"sc-15mzhqz-2"})(["display:flex;padding-top:12px;"]),Dot:o.b.span.withConfig({displayName:"styles__Dot",componentId:"sc-15mzhqz-3"})(["width:20px;text-align:center;border-radius:50%;height:20px;display:flex;justify-content:center;align-items:center;margin-right:20px;font-size:12px;font-weight:700;font-family:MarkProBold,MarkPro,sans-serif;line-height:1;background:",";color:",";"],function(e){return e.active?"rgb(255,110,126)":"rgb(222, 222, 222)"},function(e){return e.active?"rgb(255,255,255)":"rgb(136,136,136)"}),Title:o.b.div.withConfig({displayName:"styles__Title",componentId:"sc-15mzhqz-4"})(["border-bottom:1px solid rgb(221,221,221);border-left:4px solid rgb(255,110,126);font-weight:700;font-family:MarkProBold,MarkPro,sans-serif;font-size:14px;padding:8px 10px 10px;margin:12px 0 16px;text-align:left;"]),ErrorText:o.b.p.withConfig({displayName:"styles__ErrorText",componentId:"sc-15mzhqz-5"})(["color:rgb(217,58,27);font-size:12px;line-height:18px;font-weight:700;"]),ModalHeading:o.b.p.withConfig({displayName:"styles__ModalHeading",componentId:"sc-15mzhqz-6"})(["color:rgb(0,0,0);font-size:14px;font-weight:700;font-family:MarkProBold,MarkPro,sans-serif;text-transform:uppercase;text-align:center;margin:0 0 5px;@media only screen and (min-width:768px){font-size:18px;line-height:1;margin:0 0 10px;}"]),ModalText:o.b.p.withConfig({displayName:"styles__ModalText",componentId:"sc-15mzhqz-7"})(["color:rgb(120,120,120);font-size:14px;line-height:18px;text-align:center;margin:0 0 0;@media only screen and (min-width:768px){font-size:16px;}"]),ModalCTA:Object(o.b)(a.g).withConfig({displayName:"styles__ModalCTA",componentId:"sc-15mzhqz-8"})(["margin-top:24px;"]),CenteredWrapper:o.b.div.withConfig({displayName:"styles__CenteredWrapper",componentId:"sc-15mzhqz-9"})(["text-align:center;"]),SuccessTick:o.b.p.withConfig({displayName:"styles__SuccessTick",componentId:"sc-15mzhqz-10"})(["text-align:center;line-height:1;margin-top:40px;&:before{font-family:'lux-icons';content:'';font-size:96px;color:rgb(60,128,49);}"]),ErrorIcon:o.b.p.withConfig({displayName:"styles__ErrorIcon",componentId:"sc-15mzhqz-11"})(["text-align:center;line-height:1;margin-top:0;margin-bottom:20px;&:before{font-family:'lux-icons';content:'';font-size:96px;color:rgb(217,58,27);}"])};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=u(t).call(this))||"object"!==l(i)&&"function"!=typeof i?p(n):i).state={steps:[{index:0,complete:!1,title:"Verify your identity",nextStep:1,inputPlaceholder:"Enter your phone number"},{index:1,complete:!1,title:"Enter the code",nextStep:2,inputPlaceholder:"Enter the code"},{index:2,complete:!1,title:"Enter your SIM number",nextStep:"complete",inputPlaceholder:"Enter your SIM number"},{index:3,complete:!1,title:"Complete",nextStep:null,inputPlaceholder:null,submitUrl:null}],activeStep:0,hideDots:!1,validPhone:!0,phone:"",validOTP:!0,otp:"",validSimNumber:!0,simNumber:""},e.validatePhone=e.validatePhone.bind(p(e)),e.validateOTP=e.validateOTP.bind(p(e)),e.validateSimNumber=e.validateSimNumber.bind(p(e)),e}var n,o,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i["Component"]),n=t,(o=[{key:"submitPhoneNumber",value:function(){var e=this;""!==this.state.phone&&this.props.submitPhoneNumber({input:this.state.phone}).then(function(t){e.setState({activeStep:1})}).catch(function(t){"MSISDNNotFoundSoft"===t.status?e.setState({validPhone:!1}):e.setState({validPhone:!0}),console.log(["errored input",t])})}},{key:"validatePhone",value:function(e){console.log(["input",e]),this.setState({phone:e.target.value})}},{key:"submitOTP",value:function(){var e=this;this.state.validOTP&&""!==this.state.otp&&this.props.submitOTP({input:this.state.otp}).then(function(t){e.setState({activeStep:2})}).catch(function(e){console.log(["errored input",e])})}},{key:"validateOTP",value:function(e){this.setState({validOTP:this.props.validateAlphanumeric(e.target.value),otp:e.target.value})}},{key:"submitSimNumber",value:function(){var e=this;this.state.validSimNumber&&""!==this.state.simNumber&&this.props.submitSimNumber({input:this.state.simNumber}).then(function(t){e.setState({activeStep:3})}).catch(function(e){console.log(["errored input",e])})}},{key:"validateSimNumber",value:function(e){this.setState({validSimNumber:this.props.validateAlphanumeric(e.target.value),simNumber:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.errorDetails?r.a.createElement(a.f,{open:!!this.props.errorDetails,onClose:function(){e.props.showError(null)}},r.a.createElement(s.CenteredWrapper,null,r.a.createElement(s.ErrorIcon,null),r.a.createElement(s.ModalHeading,null,"Something went wrong"),r.a.createElement(s.ModalText,null,this.props.errorDetails.Description?this.props.errorDetails.Description:this.props.errorDetails),this.props.errorDetails.CTA?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.ModalCTA,{onClick:function(){window.location.href=e.props.errorDetails.URL}},this.props.errorDetails.CTA)):"")):"",r.a.createElement(a.a,{onClick:function(){return 0===e.state.activeStep?e.props.backFromSimReplacement():e.setState({activeStep:e.state.activeStep-1})}},"< Back to previous page"),r.a.createElement(s.Dots,null,!this.state.hideDots&&this.state.steps.map(function(t,n){return n>=3?r.a.createElement("div",{key:n}):r.a.createElement(s.Dot,{key:n,active:e.state.activeStep>=n+1},n+1)})),r.a.createElement(s.Title,null,this.state.steps[this.state.activeStep]?this.state.steps[this.state.activeStep].title:""),r.a.createElement(a.c,{isVisible:0===this.state.activeStep},r.a.createElement("p",null,"Enter your phone number and we'll send you your one-time password:"),r.a.createElement(a.j,{error:!this.state.validPhone,onChange:this.validatePhone,placeholder:this.state.steps[0].inputPlaceholder}),this.state.validPhone?"":r.a.createElement(s.ErrorText,null,"Your phone number was incorrect, please try again."),r.a.createElement(a.g,{onClick:function(){e.submitPhoneNumber(e.state.steps[0].nextStep,0)}},this.props.loadingStatus?"Please wait":"Send me the code"),r.a.createElement(s.Divider,null),r.a.createElement("p",null,r.a.createElement("strong",null,"Was your phone stolen?")),r.a.createElement("p",null,"If your phone has been lost or stolen and you don't have an ",r.a.createElement(a.a,{href:"https://www.optus.com.au/my-account"},"Optus account")," you will need to visit an Optus store.")),r.a.createElement(a.c,{isVisible:1===this.state.activeStep},r.a.createElement("p",null,"We've texted a six-digit one-time password to ",r.a.createElement("strong",null,this.props.storedPhone),"."),r.a.createElement(a.j,{error:!this.state.validOTP,value:this.state.otp,onChange:this.validateOTP,placeholder:this.state.steps[1].inputPlaceholder}),this.state.validOTP?"":r.a.createElement(s.ErrorText,null,"Enter your OTP"),r.a.createElement(a.g,{onClick:function(){e.submitOTP(e.state.steps[1].nextStep,1)}},this.props.loadingStatus?"Please wait":"Confirm your OTP"),r.a.createElement(s.Divider,null),r.a.createElement("p",null,"Haven't received the code? ",r.a.createElement(a.a,{onClick:function(){return e.submitPhoneNumber(e.state.steps[0].nextStep,0)}},"Re-send it."))),r.a.createElement(a.c,{isVisible:2===this.state.activeStep},r.a.createElement("p",null,"Please enter the code found on your replacement SIM to activate it."),r.a.createElement(a.j,{error:!this.state.validSimNumber,value:this.state.simNumber,onChange:this.validateSimNumber,placeholder:this.state.steps[2].inputPlaceholder}),this.state.validSimNumber?"":r.a.createElement(s.ErrorText,null,"Enter your SIM number"),r.a.createElement(a.g,{onClick:function(){e.submitSimNumber(e.state.steps[2].nextStep,2)}},this.props.loadingStatus?"Please wait":"Activate SIM"),r.a.createElement(s.Divider,null),r.a.createElement("p",null,"Your activation code is located on the back of your new SIM.")),r.a.createElement(a.c,{isVisible:3===this.state.activeStep},r.a.createElement(s.CenteredWrapper,null,r.a.createElement(s.SuccessTick,null),r.a.createElement(a.e,null,"Thank you!"),r.a.createElement("p",null,r.a.createElement("strong",null,"The activation is being processed.",r.a.createElement("br",null),"Your temporary order number is ",this.props.toExtended,".")),r.a.createElement("p",null,"It usually takes between 15-20 minutes to process. In rare cases the activation can take up to 4 hours."))))}}])&&c(n.prototype,o),d&&c(n,d),t}();t.default=d},240:function(e,t,n){"use strict";n(38);var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};i.ApiEndPointConfigs={DirectDebitStatus:{getPrimaryContact:"/mcssapi/rp-webapp-9-common/billing/customer/{customerId}/billing-arrangement/{billId}/primary-contact",getBillingEntity:"/mcssapi/rp-webapp-9-common/billing/customer/{customerId}/billing-entity"},Wallet:{getPayMeans:"/mcssapi/rp-webapp-9-common/billingcare/customer/{customerId}/individual/{personId}/pay-means"}};var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SessionStorageTopicConfigs={DirectDebitStatus:{getCustomerId:"businesswidget/repository_l9_common/common/viewmodel/contextTopics/CustomerInContextTopicViewModel",getBillId:"businesswidget/repository_l9_common/common/viewmodel/contextTopics/AccountInContextTopicViewModel",getPersonId:"businesswidget/repository_l9_common/common/viewmodel/contextTopics/IndividualInContextTopicViewModel"}}};var o=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}o.HelperConstantsConfigs={LocalhostUrl:"http://localhost:3001",LocalCustomerId:"22126545",LocalBillId:"301252364"},n.d(t,"a",function(){return s});var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axios=n(217),this.getDirectDebitStatus=this.getDirectDebitStatus.bind(this),this.fetchServices=this.fetchServices.bind(this)}var t,s,l;return t=e,(s=[{key:"getDirectDebitStatus",value:function(e){var t=this.fetchCustomerId(e),n=" ";if(e)n=o.HelperConstantsConfigs.LocalBillId;else{var r=this.fetchBillId();r&&(n=r.barId)}var a={customerId:t,billId:n,appendURL:e?o.HelperConstantsConfigs.LocalhostUrl:"",get url(){var e=i.ApiEndPointConfigs.DirectDebitStatus.getPrimaryContact.replace("{customerId}",t).replace("{billId}",n);return this.appendURL+e}};return this.axios.get(a.url,{params:{sc:"SS"}})}},{key:"getSavedPaymentMethods",value:function(e){var t="",n=this.fetchCustomerId(e),r=this.fetchPersonId();t=r?r.personId:o.HelperConstantsConfigs.LocalBillId;var a={appendURL:e?o.HelperConstantsConfigs.LocalhostUrl:"",get url(){var e=i.ApiEndPointConfigs.Wallet.getPayMeans.replace("{customerId}",n).replace("{personId}",t);return this.appendURL+e}};return this.axios.get(a.url,{params:{_:(new Date).getTime()}})}},{key:"fetchServices",value:function(e){var t=this.fetchCustomerId(e),n={customerId:t,appendURL:e?o.HelperConstantsConfigs.LocalhostUrl:"",get url(){var e=i.ApiEndPointConfigs.DirectDebitStatus.getBillingEntity.replace("{customerId}",t);return this.appendURL+e}};return this.axios.get(n.url)}},{key:"fetchCustomerId",value:function(e){if(e)return o.HelperConstantsConfigs.LocalCustomerId;if(window.sessionStorage){var t=new r,n=sessionStorage.getItem(t.SessionStorageTopicConfigs.DirectDebitStatus.getCustomerId);try{n=JSON.parse(n)}catch(i){n=null}return n?n.ID:null}return null}},{key:"fetchBillId",value:function(){if(window.sessionStorage){var e=new r,t=sessionStorage.getItem(e.SessionStorageTopicConfigs.DirectDebitStatus.getBillId);try{t=JSON.parse(t)}catch(n){t=null}return t||null}return null}},{key:"fetchPersonId",value:function(){if(window.sessionStorage){var e=new r,t=sessionStorage.getItem(e.SessionStorageTopicConfigs.DirectDebitStatus.getPersonId);try{t=JSON.parse(t)}catch(n){t=null}return t||null}return null}}])&&a(t.prototype,s),l&&a(t,l),e}()},411:function(e,t,n){"use strict";var i=n(7),r=n(115)(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(72)("includes")},412:function(e,t,n){"use strict";var i=n(7),r=n(413);i(i.P+i.F*n(414)("includes"),"String",{includes:function(e){return!!~r(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},413:function(e,t,n){var i=n(75),r=n(26);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},414:function(e,t,n){var i=n(3)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(r){}}return!0}}}]);
//# sourceMappingURL=SimActivation.f674f99f.js.map